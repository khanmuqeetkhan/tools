<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arithmetic Learning Tool</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .mode-selector {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex: 1;
        }

        .mode-btn {
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            border: 3px solid rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .mode-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .mode-btn.active {
            background: rgba(255, 255, 255, 0.4);
            border-color: white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .settings-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: 3px solid white;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .settings-btn:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        .game-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 40px;
            position: relative;
        }

        .objects-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 180px;
            opacity: 0;
            animation: slideIn 0.6s ease forwards;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
            }
        }

        .object-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
            justify-content: flex-start;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            min-height: 80px;
        }

        .object {
            font-size: 48px;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .number-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 30px;
        }

        .equation-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            animation: fadeIn 0.5s ease;
            min-width: 600px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .large-number {
            font-size: 200px;
            font-weight: 900;
            line-height: 1;
            margin: 0;
        }

        .operator {
            font-size: 80px;
            font-weight: bold;
            color: white;
            min-width: 80px;
            text-align: center;
        }

        .result-display {
            font-size: 120px;
            font-weight: 900;
            color: #FFD54F;
            cursor: pointer;
            padding: 20px 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            min-width: 200px;
            text-align: center;
            margin-top: 20px;
        }

        .result-display:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.05);
        }

        .result-display.hidden {
            color: rgba(255, 255, 255, 0.3);
            user-select: none;
        }

        .click-hint {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }

        .next-btn {
            margin-top: 30px;
            padding: 15px 50px;
            font-size: 18px;
            font-weight: bold;
            border: 3px solid rgba(255, 255, 255, 0.5);
            background: rgba(100, 200, 255, 0.3);
            color: white;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            background: rgba(100, 200, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .drawer {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: rgba(20, 20, 60, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            overflow-y: auto;
            transition: right 0.3s ease;
            z-index: 200;
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
        }

        .drawer.open {
            right: 0;
        }

        .drawer-header {
            font-size: 24px;
            font-weight: bold;
            color: white;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .setting-group {
            margin-bottom: 25px;
        }

        .setting-label {
            color: white;
            font-weight: bold;
            margin-bottom: 10px;
            display: block;
            font-size: 14px;
        }

        .setting-input, .setting-select {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .setting-input:focus, .setting-select:focus {
            outline: none;
            border-color: white;
            background: rgba(255, 255, 255, 0.2);
        }

        .setting-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .setting-select option {
            background: #1a1a3e;
            color: white;
        }

        .checkbox-group {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
        }

        .checkbox-item input {
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .reset-btn {
            width: 100%;
            padding: 12px;
            margin-top: 30px;
            background: rgba(255, 100, 100, 0.8);
            border: none;
            color: white;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: rgba(255, 100, 100, 1);
            transform: translateY(-2px);
        }

        .status-text {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            margin-top: 8px;
            text-align: center;
        }

        .range-preview {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .drawer {
                width: 100%;
                right: -100%;
            }

            .mode-selector {
                flex-wrap: wrap;
                gap: 10px;
            }

            .mode-btn {
                padding: 10px 20px;
                font-size: 14px;
            }

            .large-number {
                font-size: 120px;
            }

            .operator {
                font-size: 60px;
            }

            .objects-container {
                display: none;
            }

            .game-area {
                padding: 20px;
            }

            .header {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="addition">➕ Addition</button>
            <button class="mode-btn" data-mode="subtraction">➖ Subtraction</button>
            <button class="mode-btn" data-mode="multiplication">✕ Multiplication</button>
            <button class="mode-btn" data-mode="division">÷ Division</button>
        </div>
        <button class="settings-btn" id="settingsBtn">⚙️</button>
    </div>

    <div class="game-area">
        <div class="objects-container" id="objectsContainer"></div>
        <div class="number-display">
            <div class="equation-container">
                <div id="equationDisplay"></div>
            </div>
            <div class="result-display hidden" id="resultDisplay">?</div>
            <div class="click-hint">Click on ? to reveal the answer</div>
            <button class="next-btn" id="nextBtn">Next →</button>
        </div>
    </div>
</div>

<div class="drawer" id="drawer">
    <div class="drawer-header">
        Settings
        <button class="close-btn" id="closeDrawer">&times;</button>
    </div>

    <div class="setting-group">
        <label class="setting-label">Pause Between Numbers (ms)</label>
        <input type="number" class="setting-input" id="pauseInput" min="500" max="5000" step="500" value="2000">
    </div>

    <div class="setting-group">
        <label class="setting-label">Number Range</label>
        <select class="setting-select" id="rangeSelect">
            <option value="1-9">1 - 9</option>
            <option value="9-19">9 - 19</option>
            <option value="1-19">1 - 19</option>
            <option value="9-29">9 - 29</option>
            <option value="19-29">19 - 29</option>
            <option value="1-29">1 - 29</option>
            <option value="29-49">29 - 49</option>
            <option value="1-99">1 - 99</option>
        </select>
        <div class="range-preview" id="rangePreview"></div>
    </div>

    <div class="setting-group">
        <label class="setting-label">Number Count</label>
        <select class="setting-select" id="numberCountSelect">
            <option value="2" selected>2 Numbers (Basic)</option>
            <option value="3">3 Numbers (Advanced)</option>
            <option value="4">4 Numbers (Expert)</option>
        </select>
    </div>

    <div class="setting-group">
        <label class="setting-label">Options</label>
        <div class="checkbox-group">
            <div class="checkbox-item">
                <input type="checkbox" id="randomColors" checked>
                <label for="randomColors">Random Colors</label>
            </div>
        </div>
        <div class="checkbox-group">
            <div class="checkbox-item">
                <input type="checkbox" id="soundToggle" checked>
                <label for="soundToggle">Sound Effect</label>
            </div>
        </div>
        <div class="checkbox-group">
            <div class="checkbox-item">
                <input type="checkbox" id="objectsToggle" checked>
                <label for="objectsToggle">Show Objects</label>
            </div>
        </div>
    </div>

    <div class="setting-group">
        <label class="setting-label">Color Mode</label>
        <select class="setting-select" id="colorMode">
            <option value="random">Random</option>
            <option value="gradient">Gradient</option>
            <option value="vibrant">Vibrant</option>
        </select>
    </div>

    <div class="status-text" id="statusText"></div>

    <button class="reset-btn" id="resetBtn">Reset & Start Fresh</button>
</div>

<script>
    const colors = [
        '#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8',
        '#F7DC6F', '#BB8FCE', '#85C1E2', '#F8B88B', '#76D7C4',
        '#FF8A65', '#64B5F6', '#81C784', '#FFD54F', '#E57373'
    ];

    const objects = ['🦆', '🎈', '⭐', '🎨', '🍎', '🌟', '🎯', '🎲', '🔮', '🎪'];

    const app = {
        currentMode: 'addition',
        usedNumbers: new Set(),
        currentNumbers: [],
        pause: 2000,
        range: { min: 1, max: 9 },
        numberCount: 2,
        randomColors: true,
        soundEnabled: true,
        objectsEnabled: true,
        colorMode: 'random',

        init() {
            this.setupEventListeners();
            this.updateRangePreview();
            this.generateNumbers();
            this.displayNumbers();
        },

        setupEventListeners() {
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    this.currentMode = e.target.dataset.mode;
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    this.usedNumbers.clear();
                    this.generateNumbers();
                    this.displayNumbers();
                });
            });

            document.getElementById('settingsBtn').addEventListener('click', () => {
                document.getElementById('drawer').classList.add('open');
            });

            document.getElementById('closeDrawer').addEventListener('click', () => {
                document.getElementById('drawer').classList.remove('open');
            });

            document.getElementById('pauseInput').addEventListener('change', (e) => {
                this.pause = parseInt(e.target.value);
            });

            document.getElementById('rangeSelect').addEventListener('change', (e) => {
                const [min, max] = e.target.value.split('-').map(Number);
                this.range = { min, max };
                this.usedNumbers.clear();
                this.generateNumbers();
                this.displayNumbers();
                this.updateRangePreview();
            });

            document.getElementById('numberCountSelect').addEventListener('change', (e) => {
                this.numberCount = parseInt(e.target.value);
                this.usedNumbers.clear();
                this.generateNumbers();
                this.displayNumbers();
            });

            document.getElementById('randomColors').addEventListener('change', (e) => {
                this.randomColors = e.target.checked;
                this.displayNumbers();
            });

            document.getElementById('soundToggle').addEventListener('change', (e) => {
                this.soundEnabled = e.target.checked;
            });

            document.getElementById('objectsToggle').addEventListener('change', (e) => {
                this.objectsEnabled = e.target.checked;
                this.displayObjects();
            });

            document.getElementById('colorMode').addEventListener('change', (e) => {
                this.colorMode = e.target.value;
                this.displayNumbers();
            });

            document.getElementById('resetBtn').addEventListener('click', () => {
                this.usedNumbers.clear();
                this.generateNumbers();
                this.displayNumbers();
            });

            document.getElementById('resultDisplay').addEventListener('click', () => {
                const resultDisplay = document.getElementById('resultDisplay');
                if (resultDisplay.classList.contains('hidden')) {
                    resultDisplay.textContent = resultDisplay.dataset.result;
                    resultDisplay.classList.remove('hidden');
                } else {
                    resultDisplay.textContent = '?';
                    resultDisplay.classList.add('hidden');
                }
            });

            document.getElementById('nextBtn').addEventListener('click', () => {
                this.generateNumbers();
                this.displayNumbers();
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === ' ') {
                    e.preventDefault();
                    this.generateNumbers();
                    this.displayNumbers();
                }
            });
        },

        generateNumbers() {
            this.currentNumbers = [];
            for (let i = 0; i < this.numberCount; i++) {
                const num = Math.floor(Math.random() * (this.range.max - this.range.min + 1)) + this.range.min;
                this.currentNumbers.push(num);
            }
        },

        getColors() {
            if (!this.randomColors) {
                return ['white', 'white', 'white'];
            }

            switch(this.colorMode) {
                case 'gradient':
                    return ['#FF6B6B', '#FFA07A', '#FFD54F'];
                case 'vibrant':
                    return ['#FF1744', '#00BCD4', '#FFEB3B'];
                default:
                    return [
                        colors[Math.floor(Math.random() * colors.length)],
                        colors[Math.floor(Math.random() * colors.length)],
                        colors[Math.floor(Math.random() * colors.length)]
                    ];
            }
        },

        displayNumbers() {
            const nums = this.currentNumbers;
            const operatorMap = {
                'addition': '+',
                'subtraction': '-',
                'multiplication': '×',
                'division': '÷'
            };

            const cols = this.getColors();

            // Build equation display
            let equationHTML = '';
            for (let i = 0; i < nums.length; i++) {
                if (i > 0) {
                    equationHTML += `<div class="operator" style="color: ${cols[1]}">${operatorMap[this.currentMode]}</div>`;
                }
                equationHTML += `<div class="large-number" style="color: ${cols[i % cols.length]}">${nums[i]}</div>`;
            }

            document.getElementById('equationDisplay').innerHTML = equationHTML;

            this.playSound();
            this.displayObjects();
            this.calculateResult();
            this.updateStatus();
        },

        calculateResult() {
            let result;
            const nums = this.currentNumbers;

            switch(this.currentMode) {
                case 'addition':
                    result = nums.reduce((a, b) => a + b, 0);
                    break;
                case 'subtraction':
                    result = nums.reduce((a, b) => a - b);
                    break;
                case 'multiplication':
                    result = nums.reduce((a, b) => a * b, 1);
                    break;
                case 'division':
                    result = nums.reduce((a, b) => a / b);
                    break;
                default:
                    result = 0;
            }

            const resultDisplay = document.getElementById('resultDisplay');
            resultDisplay.textContent = '?';
            resultDisplay.classList.add('hidden');
            resultDisplay.dataset.result = Math.round(result * 100) / 100;
        },

        displayObjects() {
            const container = document.getElementById('objectsContainer');
            container.innerHTML = '';

            if (!this.objectsEnabled || this.range.max > 9 || this.numberCount > 2) {
                return;
            }

            [this.currentNumbers[0], this.currentNumbers[1]].forEach((num) => {
                const group = document.createElement('div');
                group.className = 'object-group';
                const obj = objects[Math.floor(Math.random() * objects.length)];
                for (let i = 0; i < num; i++) {
                    const el = document.createElement('span');
                    el.className = 'object';
                    el.textContent = obj;
                    group.appendChild(el);
                }
                container.appendChild(group);
            });
        },

        playSound() {
            // Sound disabled
        },

        updateStatus() {
            const max = Math.pow(this.range.max - this.range.min + 1, this.numberCount);
            document.getElementById('statusText').textContent = `Combinations available: ${max}`;
        },

        updateRangePreview() {
            const text = `Range: ${this.range.min} - ${this.range.max}`;
            document.getElementById('rangePreview').textContent = text;
        }
    };

    app.init();
</script>
</body>
</html>